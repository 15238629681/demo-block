<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title></title>
		<style>
			.inputFileWapper {
				width: 170px;
				height: 170px;
				background: url(img/public/adding_03.png) center center;
			}
			.inputFileWapper input{
				width:100%;height:100%;
				opacity: 0;
			}
		</style>

	</head>

	<body>
		<div class="addimg1">
			<div style="display:inline-block;" class="inputFileWapper">
				<input type="file" accept="image/jpeg,image/jpg,image/png,image/svg" onchange="previewImage(this,170,170)"  class="uploadimg">
			</div>
		</div>

		<!--<div class="addimg1">
			<div style="display:inline-block;">
				<img src="img/public/adding_03.png" class="img" border="0" onclick="$(this).parent().next().click();">
			</div>
			<input type="file" accept="image/jpeg,image/jpg,image/png,image/svg" onchange="previewImage1(this,170,170)" style="display: none;" class="uploadimg">
		</div>-->
	</body>
	<script src="//cdn.bootcss.com/zui/1.7.0/lib/jquery/jquery.js"></script>
	<!-- ZUI 标准版压缩后的 JavaScript 文件 -->
	<script>
		function previewImage(file, width, height) {
			var MAXWIDTH = width;
			var MAXHEIGHT = height;
//			var div = file.previousSibling.previousSibling;
var div=file.parentNode;
console.log("div----"+div)
//			var div = file;
			console.log(file);
			console.log(div);
			if(file.files && file.files[0]) {
//				div.innerHTML = "<img class='img' onclick=$('.uploadimg').click()>";
				
				var img=document.createElement("img");
//				var img = div.getElementsByClassName("img")[0];
				img.onload = function() {
					img.width = width;
					img.height = height;
				}
				var reader = new FileReader();
				reader.onload = function(evt) {
					div.style.cssText="background:url("+evt.target.result+") center center";
//					div.css({
//						"backgroundUrl":evt.target.result
//					})
//					img.src = evt.target.result; //base64图片地址
					console.log(evt.target.result)
					photoInput = img.src;
				}
				reader.readAsDataURL(file.files[0]);
			} else { //兼容IE
				console.log("取消图片选择！");
			}
		};

		function previewImage1(file, width, height) {
			var MAXWIDTH = width;
			var MAXHEIGHT = height;
			var div = file.previousSibling.previousSibling;
			console.log(file);
			console.log(div);
			if(file.files && file.files[0]) {
				div.innerHTML = "<img class='img' onclick=$('.uploadimg').click()>";
				var img = div.getElementsByClassName("img")[0];
				img.onload = function() {   //设置显示进来的图片的大小
					img.width = width;
					img.height = height;
				}
				var reader = new FileReader();
				reader.onload = function(evt) {
					img.src = evt.target.result; //base64图片地址
					photoInput = img.src;
				}
				reader.readAsDataURL(file.files[0]);
			} else { //兼容IE
				console.log("取消图片选择！");
			}
		};
	</script>

</html>